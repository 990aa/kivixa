const fs = require('fs');
const fs = require('fs');
const path = require('path');

const requiredFiles = [
  path.join(__dirname, 'renderer', 'splash.html'),
  path.join(__dirname, 'renderer', 'index.html'),
  path.join(__dirname, 'build', 'icon.ico')
];

let missing = [];
for (const file of requiredFiles) {
  if (!fs.existsSync(file)) {
    missing.push(file);
  }
}

if (missing.length > 0) {
  console.error('Missing required files for build:');
  for (const file of missing) {
    console.error(' - ' + file);
  }
  process.exit(1);
}

// Check for latest.yml (should be generated by electron-builder)
const distDir = path.join(__dirname, 'dist');
const latestYml = path.join(distDir, 'latest.yml');
if (!fs.existsSync(latestYml)) {
  console.warn('Warning: latest.yml not found in dist/. This will break auto-updates. Make sure to publish using electron-builder and upload all artifacts.');
}
